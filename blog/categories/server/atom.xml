<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Server | Do Far]]></title>
  <link href="http://dofa.org/blog/categories/server/atom.xml" rel="self"/>
  <link href="http://dofa.org/"/>
  <updated>2014-03-23T13:50:03+00:00</updated>
  <id>http://dofa.org/</id>
  <author>
    <name><![CDATA[dofa]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Debian7 Wheezy 镜像源的配置]]></title>
    <link href="http://dofa.org/blog/2014/03/09/update-debian-wheezy-mirrors/"/>
    <updated>2014-03-09T08:13:15+00:00</updated>
    <id>http://dofa.org/blog/2014/03/09/update-debian-wheezy-mirrors</id>
    <content type="html"><![CDATA[<p>debian update或install package使用国内源会非常慢，一般我们使用163源。
简单的说有两种方法修改源，我们直接使用第二种方法。</p>

<hr />

<h2>方法1：增加163源</h2>

<p>以Squeeze为例, 编辑/etc/apt/sources.list文件, 在文件最前面添加以下条目(操作前请做好相应备份)</p>

<pre><code>deb http://mirrors.163.com/debian/ squeeze main non-free contrib
deb http://mirrors.163.com/debian/ squeeze-proposed-updates main non-free contrib
deb-src http://mirrors.163.com/debian/ squeeze main non-free contrib
deb-src http://mirrors.163.com/debian/ squeeze-proposed-updates main non-free contrib
</code></pre>

<h2>方法2：替换使用163的源</h2>

<p>下载相应版本的sources.list, 覆盖/etc/apt/sources.list即可(操作前请做好相应备份)</p>

<pre><code>http://mirrors.163.com/.help/debian.html
</code></pre>

<h2>使用新的源更新debian</h2>

<pre><code>sudo apt-get update -y
sudo apt-get upgrade -y
sudo apt-get install sudo -y
</code></pre>

<h2>更新失败时</h2>

<p>注释掉下面的三行，删除也行</p>

<pre><code>#deb http://http.us.debian.org/debian wheezy main contrib non-free
#deb http://non-us.debian.org/debian-non-US wheezy/non-US main contrib non-free
#deb http://security.debian.org wheezy/updates main contrib non-free
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用PHP-FPM安装php5 server]]></title>
    <link href="http://dofa.org/blog/2014/03/03/install-php5-server-via-php-fpm/"/>
    <updated>2014-03-03T13:51:40+00:00</updated>
    <id>http://dofa.org/blog/2014/03/03/install-php5-server-via-php-fpm</id>
    <content type="html"><![CDATA[<h2>安装环境</h2>

<ul>
<li><p>nginx</p></li>
<li><p>mysql</p></li>
</ul>


<h2>使用<code>PHP-FPM</code>安装php5 server</h2>

<pre><code>apt-get install php5-fpm
</code></pre>

<blockquote><p>PHP-FPM is a daemon process (with the init script /etc/init.d/php5-fpm) that runs a FastCGI server on the socket /var/run/php5-fpm.sock.</p></blockquote>

<h2>配置nginx</h2>

<p>```
[&hellip;]
worker_processes  4;
[&hellip;]</p>

<pre><code>keepalive_timeout   2;
</code></pre>

<p>[&hellip;]
```</p>

<h2>网站配置</h2>

<pre><code>vim /etc/nginx/sites-available/yoursite
</code></pre>

<h2>PHP配置</h2>

<pre><code>vim /etc/php5/fpm/php.ini
</code></pre>

<p>set cgi.fix_pathinfo=0:</p>

<p><code>
[...]
; cgi.fix_pathinfo provides *real* PATH_INFO/PATH_TRANSLATED support for CGI.  PHP's
; previous behaviour was to set PATH_TRANSLATED to SCRIPT_FILENAME, and to not grok
; what PATH_INFO is.  For more information on PATH_INFO, see the cgi specs.  Setting
; this to 1 will cause PHP CGI to fix its paths to conform to the spec.  A setting
; of zero causes PHP to behave as before.  Default is 1.  You should fix your scripts
; to use SCRIPT_FILENAME rather than PATH_TRANSLATED.
; http://php.net/cgi.fix-pathinfo
cgi.fix_pathinfo=0
[...]
</code></p>

<h2>Server Reload</h2>

<pre><code>/etc/init.d/nginx -s reload
/etc/init.d/php5-fpm reload
</code></pre>
]]></content>
  </entry>
  
</feed>
